<!doctype html>
<html lang="de" class="h-100">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="author" content="Philipp Engler">
		<title>eufy Security AddOn für HomeMatic</title>
		
		<!-- Bootstrap core CSS -->
		<link href="assets/dist/css/bootstrap.min.css" rel="stylesheet">

		<!-- Bootstrap icon font CSS -->
		<link href="assets/dist/css/bootstrap-icons.css" rel="stylesheet">
		
		<style>
			/* used for nav bar toggle */
			.nav-scroller {
				position: relative;
				z-index: 2;
				height: 2.75rem;
				overflow-y: hidden;
			}
			
			.nav-scroller .nav {
				display: flex;
				flex-wrap: nowrap;
				padding-bottom: 1rem;
				margin-top: -1px;
				overflow-x: auto;
				text-align: center;
				white-space: nowrap;
 				-webkit-overflow-scrolling: touch;
			}
		</style>
		
		<!-- Custom styles for this template -->
		<link href="assets/dist/css/sticky-footer-navbar.css" rel="stylesheet">
		<link href="assets/dist/css/eufySecurityAddOn.css" rel="stylesheet">
	</head>
	<body class="d-flex flex-column h-100">
		<header>
			<nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark">
				<div class="container-fluid">
					<a id="lnkMain" class="navbar-brand" href="/addons/eufySecurity">eufy Security für HomeMatic</a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Seitennavigation">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarCollapse">
						<ul class="navbar-nav me-auto mb-2 mb-md-0">
							<li class="nav-item">
								<a id="lnkHome" class="nav-link" href="/addons/eufySecurity">Home</a>
							</li>
							<li class="nav-item">
								<a id="lnkDevices" class="nav-link" href="devices.html">Geräte</a>
							</li>
							<li class="nav-item">
								<a id="lnkStatechange" class="nav-link" href="statechange.html">Statusänderung</a>
							</li>
							<li class="nav-item">
								<a id="lnkSettings" class="nav-link active" aria-current="page" href="settings.html">Einstellungen</a>
							</li>
							<li class="nav-item">
								<a id="lnkLogfiles" class="nav-link" href="logfiles.html">Logdateien</a>
							</li>
							<li class="nav-item active">
								<a id="lnkInfo" class="nav-link" href="info.html">Über</a>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</header>
		
		<main class="container-fluid">
			<div id="loadApiSettingsError">
			</div>
			<div id="content">
				<form class="needs-validation" novalidate action="javascript:saveConfig();" method="post" id="configform">
					<h3>Einstellungen</h3>
					<p>
						<div id="resultLoading">

						</div>
						<div id="resultMessage">

						</div>
					</p>
				
					<div class="row">
						<div class="col">
							<div class="card mb-3 collapse" id="cardEufySecurityAccountData">
								<h5 class="card-header"><i class="bi-person-circle"></i>&nbsp;&nbsp;eufy Security Account</h5>
								<div class="row no-gutters">
									<div class="col-md-12">
										<div class="card-body" >
											<h5>Zugangsdaten</h5>
											<div class="alert alert-warning alert-dismissible fade show" role="alert">
												<h5 class="mb-1 alert-heading">Bitte erzeugen Sie einen eigenen eufy Security Account für dieses AddOn.</h5>
												<p class="mb-0">Zur problemlosen Nutzung dieses Addons erzeugen Sie einen neuen eufy Security Account in der App und geben Sie dessen Zugangsdaten hier ein.</p>
												<hr>
												<p class="my-0 form-text text-muted">Wenn Sie keinen eigenen Account für dieses AddOn anlegen, werden Sie jedes mal in Ihrer App abgemeldet, wenn dieses AddOn mit eufy Security kommuniziert bzw. das AddOn wird abgemeldet, wenn Sie Ihre App nutzen.</p>
											</div>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="mb-2" for="txtUsername">Benutzername des angelegten eufy Security Accounts.</label>
												<input type="email" name="username" id="txtUsername" class="form-control" placeholder="eMail-Adresse" required> <!--autofocus-->
												<small class="form-text text-muted">Der Benutzername ist die eMail-Adresse, mit der Sie den eufy Security Account angelegt haben.</small>
												<div class="invalid-feedback">
													Bitte geben Sie die eMail-Adresse des eufy Security Accounts ein.
												</div>
											</div>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="my-2" for="txtPassword">Passwort des angelegten eufy Security Accounts.</label>
												<input type="password" name="password" id="txtPassword" class="form-control" placeholder="Password" required>
												<small class="form-text text-muted">Das Passwort, dass Sie für den eufy Security Account angelegt haben.</small>
												<div class="invalid-feedback">
													Bitte geben Sie das Passwort des eufy Security Accounts ein.
												</div>
											</div>
											<hr>
											<h5>Weitere Einstellungen</h5>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="mb-2" for="cbCountry">Land des eufy Security Accounts.</label>
												<select name="country" id="cbCountry" class="form-select" required>
													<option disabled selected value style="display: none;">Bitte auswählen...</option>
													<option value="DE">Deutschland</option>
													<option value="AT">Österreich</option>
													<option value="CH">Schweiz</option>
												</select>
												<small class="form-text text-muted">Das Land, für den Sie den eufy Security Account erstellt haben.</small>
											</div>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="my-2" for="cbLanguage">Sprache des eufy Security Accounts.</label>
												<select name="language" id="cbLanguage" class="form-select" required>
													<option disabled selected value style="display: none;">Bitte auswählen...</option>
													<option value="de">deutsch</option>
													<option value="en">englisch</option>
												</select>
												<small class="form-text text-muted">Die Sprache, die für den eufy Security Account genutzt wird.</small>
											</div>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="my-2" for="txtTrustedDeviceName">Name des Gerätes.</label>
												<div class="input-group">
													<input type="text" name="trustedDeviceName" id="txtTrustedDeviceName" class="form-control" placeholder="Name des Gerätes" pattern="^((?!eufyclient).)*$" required>
													<button class="btn btn-secondary" type="button" id="btnGenerateNewTrustedDeviceName" onclick="generateNewTrustedDeviceName()">neuen Gerätenamen generieren</button>
												</div>
												<small class="form-text text-muted">Der Name des Gerätes wird für die Verbing mit eufy benötigt. Bitte keinen Hinweis auf die Nutzung des eufy-security-client geben.</small>
												<div class="invalid-feedback">
													Bitte geben Sie einen Gerätenamen ein. Die Zeichenkette 'eufyclient' darf nicht enthalten sein.
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<div class="card mb-3 collapse" id="cardEufySecurityConfig">
								<h5 class="card-header"><i class="bi-sliders"></i>&nbsp;&nbsp;Konfiguration des AddOns</h5>
								<div class="row no-gutters">
									<div class="col-md-12">
										<div class="card-body" >
											<h5>Einstellungen für HTTP</h5>
											<div class="form-check form-switch mt-2">
												<input class="form-check-input" type="checkbox" role="switch" name="useHttp" id="chkUseHttp" onchange="changeValue(useHttp)">
												<label class="form-check-label" for="chkUseHttp">HTTP aktiv</label>
											</div>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="mt-1 mb-2" for="txtPortHttp">Port über den die eufy Security API über HTTP erreichbar sein soll.</label>
												<input type="text" name="httpPort" id="txtPortHttp" class="form-control" placeholder="API-Port" pattern="^(1|[1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$" required>
												<small class="form-text text-muted">Der angegebene Port darf nicht in Verwendung sein.</small>
												<div class="invalid-feedback">
													Bitte geben Sie eine Zahl zwischen 1 und 65535 ein.
												</div>
											</div>
											<hr>
											<h5>Einstellungen für HTTPS</h5>
											<div class="form-check form-switch" class="mt-2">
												<input class="form-check-input" type="checkbox" role="switch" name="useHttps" id="chkUseHttps" onchange="changeValue(useHttps)">
												<label class="form-check-label" for="chkUseHttps">HTTPS aktiv</label>
											</div>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="mt-1 mb-2" for="portHttpsport">Port über den die eufy Security API über HTTPS erreichbar sein soll.</label>
												<input type="text" name="httpsPort" id="txtPortHttps" class="form-control" placeholder="API-Port" pattern="^(1|[1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$" required>
												<small class="form-text text-muted">Der angegebene Port darf nicht in Verwendung sein.</small>
												<div class="invalid-feedback">
													Bitte geben Sie eine Zahl zwischen 1 und 65535 ein.
												</div>
											</div>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="my-2" for="txtHttpsKeyFile">Speicherort der Datei mit dem privaten Schlüssel des Zertifikats.</label>
												<input type="text" name="httpsKeyFile" id="txtHttpsKeyFile" class="form-control" placeholder="Schlüsseldatei" required>
												<small class="form-text text-muted">Speicherort der Schlüsseldatei auf der CCU.</small>
											</div>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="my-2" for="txtHttpsCertFile">Speicherort des Zertifikats.</label>
												<input type="text" name="httpsCertFile" id="txtHttpsCertFile" class="form-control" placeholder="Zertifikatsdatei" required>
												<small class="form-text text-muted">Speicherort der Zertifikatsdatei auf der CCU.</small>
											</div>
											<hr>
											<h5>Einstellungen für die Hausverwaltungsfunktion</h5>
											<div class="form-check form-switch" class="mt-2">
												<input class="form-check-input" type="checkbox" role="switch" name="acceptInvitations" id="chkAcceptInvitations">
												<label class="form-check-label" for="chkAcceptInvitations">Einladungen automatisch akzeptieren</label>
											</div>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="mt-1 mb-2" for="cbConnectionType">Stationen und Geräte angezeigen.</label>
												<div id="houseSelection">
													<div id="houseSelectionMessage">

													</div>
													<select name="house" id="cbHouseSelection" class="form-select" required>
														<option disabled selected value style="display: none;">Bitte auswählen...</option>
														<option value="all">alle Stationen und Geräte des Accounts</option>
													</select>
													<small class="form-text text-muted mb-2">Bei der Einstellunge 'alle Stationen und Geräte des Accounts' werden alle Geräte angezeigt. Wird ein Haus ausgewählt, werden nur Geräte angezeigt, die diesem Haus zugeordnet wurden.</small>
												</div>
											</div>
											<hr>
											<h5>Einstellungen für die Verbindung zu den Stationen</h5>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="mb-2" for="cbConnectionType">Herstellen der Verbindung zu den Stationen.</label>
												<select name="connectionType" id="cbConnectionType" class="form-select" required>
													<option disabled selected value style="display: none;">Bitte auswählen...</option>
													<option value="0">bevorzuge lokale Verbindung</option>
													<option value="1">nur lokale Verbindung</option>
													<option value="2">schnellste Verbindung</option>
												</select>
												<small class="form-text text-muted mb-2">Diese Einstellung gilt aktuell nur für die Stationen 'HomeBase', 'HomeBase E' und 'HomeBase 2'.</small>
											</div>
											<div class="form-check form-switch mt-2">
												<input class="form-check-input" type="checkbox" role="switch" name="useUdpStaticPorts" id="chkUseUdpStaticPorts" onchange="changeValue(useUdpStaticPorts)">
												<label class="form-check-label" for="chkUseUdpStaticPorts">Verbindung zu den Station über feste Ports aufbauen</label>
											</div>
											<div id="useUDPStaticPortsStations">
												
											</div>
											<hr>
											<h5>Einstellungen für die Aktualisierung der Systemvariablen</h5>
											<div class="form-check form-switch">
												<input class="form-check-input" type="checkbox" role="switch" name="useSystemVariables" id="chkUseSystemVariables" onchange="changeValue(useSystemVariables)">
												<label class="form-check-label" for="chkUseSystemVariables">Systemvariablen bei API Aktionen automatisch aktualisieren</label>
											</div>
											<hr>
											<h5>Einstellungen für Standardbild der Kameras</h5>
											<div class="form-label-group" class="container-fluid">
												<label class="mb-2" for="txtDefaultImagePath">Standardbild für Kameras.</label>
												<input type="text" name="defaultImagePath" id="txtDefaultImagePath" class="form-control" placeholder="Link zum Standardbild.">
												<small class="form-text text-muted">Wenn die für die jeweilige Kamera kein Standbild zur Verfügung steht, wird dieser Link in der entsprechenden Systemvariable gesetzt.</small>
											</div>
											<hr>
											<h5>Einstellungen für Standardvideo der Kameras</h5>
											<div class="form-label-group" class="container-fluid">
												<label class="mb-2" for="txtDefaultVideoPath">Standardvideo für Kameras.</label>
												<input type="text" name="defaultVideoPath" id="txtDefaultVideoPath" class="form-control" placeholder="Link zum Standardvideo.">
												<small class="form-text text-muted">Wenn die für die jeweilige Kamera kein Video zur Verfügung steht, wird dieser Link in der entsprechenden Systemvariable gesetzt.</small>
											</div>
											<hr>
											<h5>Einstellungen für regelmäßige Aktualisierung des Modus</h5>
											<div class="form-check form-switch my-2">
												<input class="form-check-input" type="checkbox" role="switch" name="useUpdateStateEvent" id="chkUpdateStateEvent" onchange="changeValue(useUpdateStateEvent)">
												<label class="form-check-label" for="chkUpdateStateEvent">Modus automatisch durch von der Station gesendete Ereignisse aktualisieren</label>
												<!--<small class="form-text text-muted">Statusänderungen werden von der Station direkt nach einer externen Änderung gemeldet und aktualisiert.</small>-->
											</div>
											<div class="form-check form-switch mb-2">
												<input class="form-check-input" type="checkbox" role="switch" name="useUpdateStateIntervall" id="chkUpdateStateIntervall" onchange="changeValue(useUpdateStateIntervall)">
												<label class="form-check-label" for="chkUpdateStateIntervall">Modus regelmäßig intervallbasierend aktualisieren</label>
												<!--<small class="form-text text-muted">Status wird in regelmäßigen Abständen abgerufen.</small>-->
											</div>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="mb-2" for="txtUpdateStateIntervallTimespan">Zeit zwischen den Aktualisierungen.</label>
												<input type="text" name="updateStateIntervallTimespan" id="txtUpdateStateIntervallTimespan" class="form-control" placeholder="Intervall zwischen Aktualisierungen." pattern="^(1[5-9]|[2-9][0-9]|1[0-9]{2}|2[0-3][0-9]|240)$" required>
												<small class="form-text text-muted">Intervall in Minuten.</small>
												<div class="invalid-feedback">
													Bitte geben Sie ein Intervall zwischen 15 und 240 Minuten ein.
												</div>
											</div>
											<hr>
											<h5>Einstellungen für regelmäßige Aktualisierung der Links</h5>
											<div class="form-check form-switch my-2">
												<input class="form-check-input" type="checkbox" role="switch" name="useUpdateLinksIntervall" id="chkUseUpdateLinksIntervall" onchange="changeValue(useUpdateLinksIntervall)">
												<label class="form-check-label" for="chkUseUpdateLinksIntervall">Links regelmäßig aktualisieren</label>
											</div>
											<div class="form-check form-switch mb-2">
												<input class="form-check-input" type="checkbox" role="switch" name="useUpdateLinksOnlyWhenActive" id="chkUpdateLinksOnlyWhenActive">
												<label class="form-check-label" for="chkUpdateLinksOnlyWhenActive">Links nur regelmäßig aktualisieren, wenn System aktiv ist</label>
											</div>
											<div class="form-label-group was-validated" class="container-fluid">
												<label class="mb-2" for="txtUpdateLinksIntervallTimespan">Zeit zwischen den Aktualisierungen.</label>
												<input type="text" name="updateLinksIntervallTimespan" id="txtUpdateLinksIntervallTimespan" class="form-control" placeholder="Intervall zwischen Aktualisierungen." pattern="^(1[5-9]|[2-9][0-9]|1[0-9]{2}|2[0-3][0-9]|240)$" required>
												<small class="form-text text-muted">Intervall in Minuten.</small>
												<div class="invalid-feedback">
													Bitte geben Sie ein Intervall zwischen 15 und 240 Minuten ein.
												</div>
											</div>
											<hr>
											<h5>Einstellungen für Pushbenachrichtigungen</h5>
											<div class="form-check form-switch mt-2">
												<input class="form-check-input" type="checkbox" role="switch" name="usePushService" id="chkUsePushService">
												<label class="form-check-label" for="chkUsePushService">Pushbenachrichtigungen aktivieren</label>
											</div>
											<small class="form-text text-muted">Pushbenachrichtigungen werden z.B. für die Ermittlung der Zeitangabe der letzten Ereignisse für die Kameras benötigt.</small>
											<hr>
											<h5>Einstellungen für Protokollierung</h5>
											<div class="form-label-group" class="container-fluid">
												<label class="mb-2" for="cbLogLevel">Umfang der Protokollierung.</label>
												<div id="alertLogLevel">
												</div>
												<select name="logLevel" id="cbLogLevel" class="form-select" oninput="checkLogLevel(this.value);" required>
													<option disabled selected value style="display: none;">Bitte auswählen...</option>
													<option value="0">grundlegende Informationen</option>
													<option value="1">alle Informationen</option>
													<option value="2">alle Informationen, alle Fehler</option>
													<option value="3">alle Informationen, alle Fehler, alle Debuginformationen</option>
												</select>
												<small class="form-text text-muted">Legt den Umfang der Protokollierung fest. Fehler werden unabhängig dieser Einstellung beim Auftreten immer in der Fehlerprotokolldatei 'eufySecurity.err' protokolliert.</small>
												<div class="invalid-feedback">
													Bitte wählen Sie eine Protokollierungsstufe aus.
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<div class="mb-3 collapse" id="containerBtnSave">
								<button type="submit" class="btn btn-primary">Einstellungen speichern</button><br />
							</div>

							<div class="card mb-3 collapse" id="cardSystemVariables">
								<h5 class="card-header"><i class="bi-table"></i>&nbsp;&nbsp;Systemvariablen</h5>
								<div class="row no-gutters">
									<div class="col-md-12">
										<div class="card-body">
											<div id="divSystemVariablesHint">
											</div>
											<div id="divSystemVariables">
											</div>
										</div>
									</div>
								</div>
							</div>

							<div class="card mb-3">
								<h5 class="card-header"><i class="bi-tools"></i>&nbsp;&nbsp;Fehlerbehebung</h5>
								<div class="row no-gutters">
									<div class="col-md-12">
										<div class="card-body" >
											<div class="alert alert-warning fade show" role="alert">
												<div class="row align-items-center">
													<div class="col-xs-12 col-sm-4 col-md-3 col-lg-2 col-xl-2">
														<div id="enableTS" class="d-grid"><button id="btnEnableTroubleShooting" onclick="enableButtons(true)" type="button" class="btn btn-outline-warning btn-block">Fehlerbehebung aktivieren</button></div>
													</div>
													<div class="col-xs-12 col-sm-8 col-md-9 col-lg-10 col-xl-10">
														<h5 class="mb-1 alert-heading">Erweiterte Funktionen zur Fehlerbehebung</h5>
														<span class="mb-0">Mit den folgenden Buttons können Sie verschiedene Aufgaben ausführen, um die Funktionsfähigkeit des AddOns wiederherzustellen. Um ungewollte Änderungen zu vermeiden, müssen Sie die Bearbeitung für einige Aufgaben zuerst freischalten.</span>
														<hr>
														<small class="mt-0 form-text text-muted">Bitte beachten Sie, dass einige der Funktionen Daten und Einstellungen verändern oder löschen.</small>
													</div>
												</div>
											</div>
											<div class="form-label-group" class="container-fluid">
												<label for="btnDownloadConfigFile" class="mb-2">Konfiguration sichern<br /><small class="form-text text-muted">Bitte beachten Sie, dass diese Datei Ihre Zugangsdaten im Klartext enthält.</small></label><br />
												<button id="btnDownloadConfigFile" onclick="downloadFile('conf')" type="button" class="btn btn-outline-primary">Konfiguration herunterladen</button>
											</div>
											<hr />
											<div class="form-label-group" class="container-fluid">
												<label for="btnSelectConfigFile" class="form-label">Konfiguration wiederherstellen<br /><small class="form-text text-muted">Die Datei wird nach dem Hochladen überprüft. Wenn die Überprüfung erfolgreich ist, wird das AddOn neu gestartet um die neuen Einstellungen übernommen.</small></label><br />
												<input class="form-control mb-2" type="file" id="btnSelectConfigFile" onchange="selectedFile('conf')">
												<button id="btnUploadConfigFile" onclick="uploadFile('conf')" type="button" class="btn btn-outline-primary mt-2" disabled>Konfiguration hochladen</button>
												<div class="mt-3" id="resultUploadMessage">

												</div>
											</div>
											<hr />
											<div class="form-label-group" class="container-fluid">
												<label id="lblDeleteTokenData" for="btnDeleteTokenData" class="text-muted">Token löschen<br /><small class="form-text text-muted"><span id="spnToken"></span>Wenn Sie in der Logdatei den Fehler <code>401 (Unauthorized)</code> erhalten, können Sie versuchen, das vorhandene Token zu löschen. Dadurch wird bei der nächsten Anfrage ein neues Token erzeugt.</small></label><br />
												<button id="btnDeleteTokenData" onclick="removeTokenData()" type="button" class="btn btn-outline-primary mt-2" disabled>Token löschen</button>
											</div>
											<hr />
											<div class="form-label-group" class="container-fluid">
												<label id="lblRestartService" for="btnRestartService" class="text-muted">Service neu starten<br /><small class="form-text text-muted">Unter Umständen kann es notwendig sein, den Service neu zu starten. Dabei werden alle bereits übertragenen Änderungen gespeichert und der Service neu gestartet.</small></label><br />
												<button id="btnRestartService" onclick="restartService()" type="button" class="btn btn-outline-primary mt-2" disabled>Service neu starten</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</main>

		<footer class="footer mt-auto py-3 bg-light">
			<div class="container-fluid">
				<span id="footerCopyright" class="text-muted">&copy; 2020 Philipp Engler</span>
			</div>
		</footer>
		
		<div id="toastCheckConfigFailed" class="toast bg-danger" role="alert" data-bs-autohide="true" data-bs-delay="15000" style="position: fixed; bottom: 10px; right: 10px;">
			<div class="toast-header">
				<strong class="me-auto">Überprüfung der Eingaben.</strong>
				<button type="button" class="ms-2 mb-1 btn-close" data-bs-dismiss="toast"></button>
			</div>
			<div class="toast-body text-white">
				Die Überprüfung der Eingaben ist fehlgeschlagen. Bitte überprüfen Sie die rot markierten Eingabefelder und beachten Sie die Hinweise.
			</div>
		</div>

		<div id="toastSaveConfigOK" class="toast bg-success" role="alert" data-bs-autohide="true" data-bs-delay="5000" style="position: fixed; bottom: 10px; right: 10px;">
			<div class="toast-header">
				<strong class="me-auto">Speicherung der Einstellungen.</strong>
				<button type="button" class="ms-2 mb-1 btn-close" data-bs-dismiss="toast"></button>
			</div>
			<div class="toast-body text-white">
				Die Einstellungen wurden erfolgreich gespeichert.
			</div>
		</div>
		
		<div id="toastSaveConfigFailed" class="toast bg-danger" role="alert" data-bs-autohide="true" data-bs-delay="15000" style="position: fixed; bottom: 10px; right: 10px;">
			<div class="toast-header">
				<strong class="me-auto">Speicherung der Einstellungen.</strong>
				<button type="button" class="ms-2 mb-1 btn-close" data-bs-dismiss="toast"></button>
			</div>
			<div class="toast-body text-white">
				Bei dem Speichern der Einstellungen ist ein Fehler aufgetreten.
			</div>
		</div>

		<div id="toastUploadConfigFailed" class="toast bg-danger" role="alert" data-bs-autohide="true" data-bs-delay="15000" style="position: fixed; bottom: 10px; right: 10px;">
			<div class="toast-header">
				<strong class="me-auto">Upload der Konfigurationsdatei.</strong>
				<button type="button" class="ms-2 mb-1 btn-close" data-bs-dismiss="toast"></button>
			</div>
			<div class="toast-body text-white">
				Bei dem Hochladen der Konfigrationsdatei ist ein Fehler aufgetreten.
			</div>
		</div>
		
		<div id="toastRemoveTokenOK" class="toast bg-success" role="alert" data-bs-autohide="true" data-bs-delay="5000" style="position: fixed; bottom: 10px; right: 10px;">
			<div class="toast-header">
				<strong class="me-auto">Tokendaten löschen.</strong>
				<button type="button" class="ms-2 mb-1 btn-close" data-bs-dismiss="toast"></button>
			</div>
			<div class="toast-body text-white">
				Die Tokendaten wurden erfolgreich gelöscht.
			</div>
		</div>
		
		<div id="toastRemoveTokenFailed" class="toast bg-danger" role="alert" data-bs-autohide="true" data-bs-delay="5000" style="position: fixed; bottom: 10px; right: 10px;">
			<div class="toast-header">
				<strong class="me-auto">Tokendaten löschen.</strong>
				<button type="button" class="ms-2 mb-1 btn-close" data-bs-dismiss="toast"></button>
			</div>
			<div class="toast-body text-white">
				Bei dem Löschen der Tokendaten ist ein Fehler aufgetreten.
			</div>
		</div>

		<div id="toastRestartOK" class="toast bg-success" role="alert" data-bs-autohide="true" data-bs-delay="7000" style="position: fixed; bottom: 10px; right: 10px;">
			<div class="toast-header">
				<strong class="me-auto">Service neu starten.</strong>
				<button type="button" class="ms-2 mb-1 btn-close" data-bs-dismiss="toast"></button>
			</div>
			<div class="toast-body text-white">
				Der Service wird neu gestartet.
			</div>
		</div>
		
		<div id="toastRestartFailed" class="toast bg-danger" role="alert" data-bs-autohide="true" data-bs-delay="15000" style="position: fixed; bottom: 10px; right: 10px;">
			<div class="toast-header">
				<strong class="me-auto">Service neu starten.</strong>
				<button type="button" class="ms-2 mb-1 btn-close" data-bs-dismiss="toast"></button>
			</div>
			<div class="toast-body text-white">
				Bei dem Neustart des Services ist ein Fehler aufgetreten.
			</div>
		</div>

		<div class="modal fade" id="modalAtLeastOneNeedsActivation" role="alert" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="lblModalAtLeastOneNeedsActivation" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header text-bg-danger">
						<h5 class="modal-title" id="lblModalTitle">Einstellungen überprüfen.</h5>
					</div>
					<div class="modal-body">
						Um die Erreichbarkeit der API zu gewährleisten, muss mindestens eine der beiden Optionen ('HTTP aktiv' oder 'HTTPS aktiv') aktiviert sein.<br /><br />
						Mit 'OK' wird die zuletzt deaktivierte Option wieder aktiviert.
					</div>
					<div class="modal-footer bg-secondary" style="--bs-bg-opacity: .5;">
						<button type="button" id="modalAtLeastOneNeedsActivationBtnOK" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="modalStateEventOrIntervall" role="alert" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="lblModalStateEventOrIntervall" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header text-bg-danger">
						<h5 class="modal-title" id="lblModalTitle">Einstellungen überprüfen.</h5>
					</div>
					<div class="modal-body">
						Es kann nicht gleichzeitig die Option "Modus automatisch durch von der Station gesendete Ereignisse aktualisieren" und die Option "Modus regelmäßig intervallbasierend aktualisieren" aktiviert werden.<br /><br />
						Mit 'OK' wird die zuletzt aktivierte Option deaktiviert.
					</div>
					<div class="modal-footer bg-secondary" style="--bs-bg-opacity: .5;">
						<button type="button" id="modalStateEventOrIntervallBtnOK" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="modalUDPPortsEqualWrong" role="alert" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="lblModalUDPPortsEqualWrong" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header text-bg-danger">
						<h5 class="modal-title" id="lblModalTitle">Einstellungen überprüfen.</h5>
					</div>
					<div class="modal-body" id="modalUDPPortsEqualWrongMessage">
						
					</div>
					<div class="modal-footer bg-secondary" style="--bs-bg-opacity: .5;">
						<button type="button" id="modalUDPPortsEqualWrongBtnOK" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="modalCaptchaCode" role="alert" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="lblModalCaptchaCode" aria-hidden="true">
		</div>
		
		<script src="assets/dist/js/bootstrap.min.js"></script>
		<script src="assets/dist/js/addon.js"></script>
		<script>
			document.getElementById("footerCopyright").innerHTML = `&copy; 2020-${new Date().getFullYear()} Philipp Engler`;
			if(window.navigator.userAgent.indexOf("Trident") > 0)
			{
				alert("Die Funktionalität der Webseite kann beim Internet Explorer nicht sichergestellt werden. Nutzen Sie bitte Firefox, Microsoft Edge, Safari oder einen anderen unterstützen Browser.");
			}
			else
			{
				start("settings");
			}
		</script>
	</body>
</html>
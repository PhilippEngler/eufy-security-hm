<!doctype html>
<html lang="de" class="h-100">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="">
		<meta name="author" content="Philipp Engler">
		<meta name="generator" content="Jekyll v4.1.1">
		<title>eufy Security AddOn für HomeMatic</title>
		
		<!-- Bootstrap core CSS -->
		<link href="assets/dist/css/bootstrap.min.css" rel="stylesheet">
		
		<!-- Bootstrap icon font CSS -->
		<link href="assets/dist/css/bootstrap-icons.css" rel="stylesheet">
		
		<style>
			.bd-placeholder-img {
				font-size: 1.125rem;
				text-anchor: middle;
				-webkit-user-select: none;
				-moz-user-select: none;
				-ms-user-select: none;
				user-select: none;
			}
			
			@media (min-width: 768px) {
				.bd-placeholder-img-lg {
					font-size: 3.5rem;
				}
			}
			
			.b-example-divider {
				height: 3rem;
				background-color: rgba(0, 0, 0, .1);
				border: solid rgba(0, 0, 0, .15);
				border-width: 1px 0;
				box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
			}
			
			.b-example-vr {
				flex-shrink: 0;
				width: 1.5rem;
				height: 100vh;
			}
			
			.bi {
				vertical-align: -.125em;
				fill: currentColor;
			}
			
			.nav-scroller {
				position: relative;
				z-index: 2;
				height: 2.75rem;
				overflow-y: hidden;
			}
			
			.nav-scroller .nav {
				display: flex;
				flex-wrap: nowrap;
				padding-bottom: 1rem;
				margin-top: -1px;
				overflow-x: auto;
				text-align: center;
				white-space: nowrap;
 				-webkit-overflow-scrolling: touch;
			}
		</style>
		
		<!-- Custom styles for this template -->
		<link href="assets/dist/css/sticky-footer-navbar.css" rel="stylesheet">
		<link href="assets/dist/css/eufySecurityAddOn.css" rel="stylesheet">
	</head>
	<body class="d-flex flex-column h-100">
		<header>
			<nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark">
				<div class="container-fluid">
					<a id="lnkMain" class="navbar-brand" href="/addons/eufySecurity">eufy Security AddOn für HomeMatic</a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarCollapse">
						<ul class="navbar-nav me-auto mb-2 mb-md-0">
							<li class="nav-item">
								<a id="lnkHome" class="nav-link" href="/addons/eufySecurity"">Home</a>
							</li>
							<li class="nav-item">
								<a id="lnkDevices" class="nav-link active" aria-current="page" href="devices.html">Geräte</a>
							</li>
							<li class="nav-item">
								<a id="lnkStatechange" class="nav-link" href="statechange.html">Statusänderung</a>
							</li>
							<li class="nav-item">
								<a id="lnkSettings" class="nav-link" href="settings.html">Einstellungen</a>
							</li>
							<li class="nav-item">
								<a id="lnkLogfiles" class="nav-link" href="logfiles.html">Logdateien</a>
							</li>
							<li class="nav-item active">
								<a id="lnkInfo" class="nav-link" href="info.html">Über</a>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</header>
		
		<main class="container-fluid">
			<div id="browserWarning">
			</div>
			<div id="loadApiSettingsError">
			</div>
			<div id="content">
				<h3>Geräte</h3>
				<p>Hier finden Sie alle Geräte, die dem angegebenen Account zugeordnet sind.</p>
				<p id="stations"></p>
				<p id="devices"></p>
			</div>
		</main>

		<footer class="footer mt-auto py-3 bg-light">
			<div class="container-fluid">
				<span class="text-muted">&copy; 2020-2022 Philipp Engler</span>
			</div>
		</footer>

		<div class="modal fade" id="modalNotImplemented" role="alert" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="lblModalNotImplemented" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header text-bg-primary">
						<h5 class="modal-title" id="lblModalTitle">Funktion noch nicht implementiert.</h5>
					</div>
					<div class="modal-body">
						Diese Funktionalität ist derzeit noch nicht implementiert und wird in einer der nächsten Versionen verfügbar sein.
					</div>
					<div class="modal-footer bg-secondary" style="--bs-bg-opacity: .5;">
						<button type="button" id="btnOKModalNotImplemented" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
					</div>
				</div>
			</div>
		</div>
		
		<script src="assets/dist/js/bootstrap.bundle.min.js"></script>
		<script>
			port = "";
			checkIE();
			
			function checkIE()
			{
				if (window.document.documentMode)
				{
					var warning = `<div class="alert alert-warning alert-dismissible fade show" role="alert">`;
					warning += `<h4>Diese Webseite ist nicht für den Internet Explorer entwickelt.</h4>`;
					warning += `Die Funktionalität der Webseite kann beim Internet Explorer nicht sichergestellt werden. Nutzen Sie bitte Firefox, Microsoft Edge, Safari oder einen anderen unterstützen Browser.`;
					warning += `</div>`;
					document.getElementById("browserWarning").innerHTML = warning;
					document.getElementById("content").innerHTML = "";
				}
				else
				{
					if(!(window.location.search == ""))
					{
						addQueryStringToLinks(window.location.search);
					}
					getAPIPort();
				}
			}

			function addQueryStringToLinks(sessionID)
			{
				document.getElementById("lnkMain").setAttribute("href", document.getElementById("lnkHome").getAttribute("href") + sessionID);
				document.getElementById("lnkHome").setAttribute("href", document.getElementById("lnkHome").getAttribute("href") + sessionID);
				document.getElementById("lnkDevices").setAttribute("href", document.getElementById("lnkDevices").getAttribute("href") + sessionID);
				document.getElementById("lnkStatechange").setAttribute("href", document.getElementById("lnkStatechange").getAttribute("href") + sessionID);
				document.getElementById("lnkSettings").setAttribute("href", document.getElementById("lnkSettings").getAttribute("href") + sessionID);
				document.getElementById("lnkLogfiles").setAttribute("href", document.getElementById("lnkLogfiles").getAttribute("href") + sessionID);
				document.getElementById("lnkInfo").setAttribute("href", document.getElementById("lnkInfo").getAttribute("href") + sessionID);
			}

			function getAPIPort()
			{
				var apiPorts;
				var url = `${location.protocol}//${location.hostname}/addons/eufySecurity/apiPorts.txt`;
				xmlHttp = new XMLHttpRequest();
				xmlHttp.overrideMimeType('text/plain');
				xmlHttp.onreadystatechange = function()
				{
					if (this.readyState == 4 && this.status == 200)
					{
						try
						{
							apiPorts = this.responseText;
							apiPorts = apiPorts.split(",")
							
							if(apiPorts.length == 2)
							{
								port = apiPorts[0];
								if(location.protocol == "https:")
								{
									port = apiPorts[1];
								}
							}
							else
							{
								port = "52789";
								if(location.protocol == "https:")
								{
									port = "52790";
								}
							}

							initContent();
						}
						catch (e)
						{
							var loadSettingsError = `<div class="alert alert-warning alert-dismissible fade show" role="alert">`;
							loadSettingsError += `Bei der Ermittlung der API-Ports ist ein Fehler aufgetreten.<br />`;
							loadSettingsError += `<small class="text-muted">Bitte überprüfen Sie die Datei apiPorts.txt im Webseitenverzeichnisses dieses AddOns.</small>`;
							loadSettingsError += `</div>`;
							document.getElementById("loadApiSettingsError").innerHTML = loadSettingsError;;
						}
					}
					else if (this.readyState == 4)
					{
						var loadSettingsError = `<div class="alert alert-warning alert-dismissible fade show" role="alert">`;
						loadSettingsError += `Bei der Ermittlung der API-Ports ist ein Fehler aufgetreten.<br />`;
						loadSettingsError += `<small class="text-muted">Bitte überprüfen Sie die Datei apiPorts.txt im Webseitenverzeichnisses dieses AddOns.</small>`;
						loadSettingsError += `</div>`;
						document.getElementById("loadApiSettingsError").innerHTML = loadSettingsError;
					}
				};
				xmlHttp.open("GET", url, true);
				xmlHttp.send();
			}

			function initContent()
			{
				loadStations();
				loadDevices();
			}
			
			function loadStations()
			{
				document.getElementById("stations").innerHTML = `<p id="stations"></p>`;
				
				var xmlhttp, myObj, station, stations = "";
				var imagepath = "";
				var type = "";
				var state = "";
				var url = `${location.protocol}//${location.hostname}:${port}/getBases`;
				xmlhttp = new XMLHttpRequest();
				xmlhttp.overrideMimeType('application/json');
				xmlhttp.onreadystatechange = function()
				{
					if (this.readyState == 4 && this.status == 200)
					{
						myObj = JSON.parse(this.responseText);
						if(myObj.success == true)
						{
							if(myObj.data.length > 0)
							{
								stations += `<h4>Basisstationen</h4>`;
								stations += `<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-3 row-cols-xl-5">`;
								for (station in myObj.data)
								{
									if(myObj.data[station].device_type == "station")
									{
										switch (myObj.data[station].model)
										{
											case "T8001":
												imagepath = `<img src="assets/devices/eufyHomeBase.png" class="card-img-top" alt="HomeBase">`;
												type="HomeBase";
												break;
											case "T8002":
												imagepath = `<img src="assets/devices/eufyHomeBase.png" class="card-img-top" alt="HomeBase E">`;
												type="HomeBase E";
												break;
											case "T8010":
												imagepath = `<img src="assets/devices/eufyHomeBase2.png" class="card-img-top" alt="HomeBase 2">`;
												type="HomeBase 2";
												break;
											default:
												imagepath = `<img src="assets/devices/eufyHomeBase2.png" class="card-img-top" alt="HomeBase">`;
												type="HomeBase";
										}
										switch (myObj.data[station].guard_mode)
										{
											case "0":
												state = "abwesend";
												break;
											case "1":
												state = "zu Hause";
												break;
											case "2":
												state = "Zeitplan";
												break;
											case "3":
												state = "Benutzerdefiniert 1";
												break;
											case "4":
												state = "Benutzerdefiniert 2";
												break;
											case "5":
												state = "Benutzerdefiniert 3";
												break;
											case "6":
												state = "ausgeschaltet";
												break;
											case "47":
												state = "Geofencing";
												break;
											case "63":
												state = "deaktiviert";
												break;
											default:
												state="unbekannt";
										}
										stations += `<div class="col">`;
										stations += `<div class="card mb-3">`;
										stations += `<div class="card-header">`;
										stations += `<div style="text-align:left; float:left;"><h5 class="mb-0">${myObj.data[station].name}</h5></div>`;
										stations += `<div style="text-align:right;"><span class="text-nowrap"><h5 class="mb-0"><i class="text-muted bi-gear" title="Einstellungen" onclick="showStationSettings('${myObj.data[station].station_id}')"></i></h5></span></div>`;
										stations += `</div>`
										stations += `<div class="row no-gutters">`;
										stations += `<div class="col-md-4">${imagepath}</div>`;
										stations += `<div class="col-md-8">`;
										stations += `<div class="card-body" style="margin-left: -1rem">`;
										stations += `<h6 class="card-subtitle mb-2 text-muted">${type}</h6>`;
										stations += `<p class="card-text">${myObj.data[station].station_id}<br /><span class="text-nowrap"><i class="bi-gear-wide-connected" title="Firmwareversion"></i>&nbsp;${myObj.data[station].software_version}</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-nowrap"><i class="bi-shield" title="aktueller Status"></i>&nbsp;${state}</span></p>`;
										stations += `</div>`;
										stations += `</div>`;
										stations += `</div>`;
										stations += `<div class="card-footer">`;
										stations += `<small class="text-muted">IP-Adresse: ${myObj.data[station].local_ip_address} (${myObj.data[station].external_ip_address})</small>`;
										stations += `</div>`;
										stations += `</div>`;
										stations += `</div>`;
									}
								}
								stations += `</div>`;
							}
							else
							{
								stations += `<h4>Basisstationen</h4><div class="alert alert-danger" role="alert">Es wurden keine Basisstationen gefunden.</div>`;
							}
							document.getElementById("stations").innerHTML = stations;
							type = "";
						}
						else
						{
							document.getElementById("stations").innerHTML = `<h4>Basisstationen</h4><div class="alert alert-danger" role="alert">Fehler beim Laden der Basisstationen.</div>`;
						}
					}
					else if (this.readyState == 4)
					{
						document.getElementById("stations").innerHTML = `<h4>Basisstationen</h4><div class="alert alert-danger" role="alert">Fehler beim Laden der Basisstationen.</div>`;
					}
					else
					{
						document.getElementById("stations").innerHTML = `<div class="d-flex align-items-center"><div class="spinner-border m-4 float-left" role="status" aria-hidden="true"></div><strong>Lade verfügbare Basisstationen...</strong></div>`;
					}
				};
				xmlhttp.open("GET", url, true);
				xmlhttp.send();
			}

			function loadDevices()
			{
				var xmlhttp, myObj, object;
				var text = "";
				var cams = "";
				var indoorcams = "";
				var doorbellcams = "";
				var floodlightcams = "";
				var imagepath = "";
				var type = "";
				var lastVideo = "keine Aufnahme";
				var url = `${location.protocol}//${location.hostname}:${port}/getDevices`;
				xmlhttp = new XMLHttpRequest();
				xmlhttp.overrideMimeType('application/json');
				xmlhttp.onreadystatechange = function()
				{
					if (this.readyState == 4 && this.status == 200)
					{
						myObj = JSON.parse(this.responseText);
						if(myObj.success == true)
						{
							if(myObj.data.length > 0)
							{
								for (object in myObj.data)
								{
									if(myObj.data[object].device_type == "camera")
									{
										switch (myObj.data[object].model)
										{
											case "T8111":
												imagepath = `<img src="assets/devices/eufyCamE.png" class="card-img-top" alt="eufyCam">`;
												type = "eufyCam";
												break;
											case "T8112":
												imagepath = `<img src="assets/devices/eufyCamE.png" class="card-img-top" alt="eufyCam E">`;
												type = "eufyCam E";
												break;
											case "T8113":
												imagepath = `<img src="assets/devices/eufyCam2c.png" class="card-img-top" alt="eufyCam 2C">`;
												type = "eufyCam 2C";
												break;
											case "T8114":
												imagepath = `<img src="assets/devices/eufyCam2.png" class="card-img-top" alt="eufyCam 2">`;
												type = "eufyCam 2";
												break;
											case "T8140":
												imagepath = `<img src="assets/devices/eufyCam2.png" class="card-img-top" alt="eufyCam 2 Pro">`;
												type = "eufyCam 2 Pro";
												break;
											case "T8142":
												imagepath = `<img src="assets/devices/eufyCam2c.png" class="card-img-top" alt="eufyCam 2C Pro">`;
												type = "eufyCam 2C Pro";
												break;
											default:
												imagepath = `<img src="assets/devices/eufyCam2.png" class="card-img-top" alt="Kamera">`;
												type = "Kamera";
										}
										if(myObj.data[object].last_camera_image_time != "" && myObj.data[object].last_camera_image_time != "n/a" && myObj.data[object].last_camera_image_time != "n/d" && myObj.data[object].last_camera_image_time != "0")
										{
											lastVideo = `Letzte Aufnahme: ${makeDateTimeString(new Date(parseInt(myObj.data[object].last_camera_image_time)))}`;
											lastVideo += ` | <a href="${myObj.data[object].last_camera_image_url}">Standbild</a>`;
										}
										else if(myObj.data[object].last_camera_image_time == "n/a")
										{
											lastVideo = "keine Aufnahme";
										}
										else
										{
											lastVideo = "letzte Aufnahme nicht verfügbar";
										}
										cams += `<div class="col mb-3">`;
										cams += `<div class="card">`;
										cams += `<div class="card-header">`;
										cams += `<div style="text-align:left; float:left;"><h5 class="mb-0">${myObj.data[object].name}</h5></div>`;
										cams += `<div style="text-align:right;"><span class="text-nowrap"><h5 class="mb-0">`;
										cams += `<i class="${myObj.data[object].wifi_rssi_signal_level == 0 ? "bi-reception-0" : myObj.data[object].wifi_rssi_signal_level == 1 ? "bi-reception-1" : myObj.data[object].wifi_rssi_signal_level == 2 ? "bi-reception-2" : myObj.data[object].wifi_rssi_signal_level == 3 ? "bi-reception-3" : myObj.data[object].wifi_rssi_signal_level == 4 ? "bi-reception-4" : "bi-wifi-off"}" title="WiFi Empfangsstärke: ${myObj.data[object].wifi_rssi}dB"></i>`;
										cams += `&nbsp;&nbsp;`;
										cams += `<i class="text-muted bi-gear" title="Einstellungen" onclick="showDeviceSettings('${myObj.data[object].device_id}')"></i>`;
										cams += `</h5></span></div>`;
										cams += `</div>`
										cams += `<div class="row no-gutters">`;
										cams += `<div class="col-md-4">${imagepath}</div>`;
										cams += `<div class="col-md-8">`;
										cams += `<div class="card-body" style="margin-left: -1rem">`;
										cams += `<h6 class="card-subtitle mb-2 text-muted">${type}</h6>`;
										cams += `<p class="card-text">${myObj.data[object].device_id}<br /><span class="text-nowrap"><i class="bi-gear-wide-connected" title="Firmwareversion"></i> ${myObj.data[object].software_version}</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-nowrap"><i class="${myObj.data[object].battery_charging == 1 ? "bi-battery-charging" : myObj.data[object].battery_charge < 5 ? "bi-battery" : myObj.data[object].battery_charge < 50 ? "bi-battery-half" : "bi-battery-full"} ${myObj.data[object].battery_charge < 5 ? "text-danger" : myObj.data[object].battery_charge < 15 ? "text-warning" : ""}" title="Ladezustand des Akkus"></i>&nbsp;${myObj.data[object].battery_charge}%</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-nowrap"><i class="${myObj.data[object].battery_temperature < 0 ? "bi-thermometer-low" : myObj.data[object].battery_temperature < 30 ? "bi-thermometer-half" : "bi-thermometer-high"}" title="Temperatur"></i>&nbsp${myObj.data[object].battery_temperature}&deg;C</span></p>`;
										cams += `</div>`;
										cams += `</div>`;
										cams += `</div>`;
										cams += `<div class="card-footer">`;
										cams += `<small class="text-muted">${lastVideo}</small>`;
										cams += `</div>`;
										cams += `</div>`;
										cams += `</div>`;
									}
									else if(myObj.data[object].device_type == "indoorcamera")
									{
										switch (myObj.data[object].model)
										{
											case "T8400":
												imagepath = `<img src="assets/devices/eufyFloodLightCam.png" class="card-img-top" alt="Indoor Cam 2K">`;
												type = "Indoor Cam 2K";
												break;
											case "T8410":
												imagepath = `<img src="assets/devices/eufyFloodLightCam.png" class="card-img-top" alt="Indoor Cam 2K P&T">`;
												type = "Indoor Cam 2K P&T";
												break;
											default:
												imagepath = `<img src="assets/devices/eufyCam2.png" class="card-img-top" alt="Innenkamera">`;
												type = "Innenkamera";
										}
										if(myObj.data[object].last_camera_image_time != "" && myObj.data[object].last_camera_image_time != "n/a" && myObj.data[object].last_camera_image_time != "n/d" && myObj.data[object].last_camera_image_time != "0")
										{
											lastVideo = makeDateTimeString(new Date(parseInt(myObj.data[object].last_camera_image_time)));
											lastVideo += ` | <a href="${myObj.data[object].last_camera_image_url}">Standbild</a>`;
										}
										else if(myObj.data[object].last_camera_image_time == "n/a")
										{
											lastVideo = "keine Aufnahme";
										}
										else
										{
											lastVideo = "letzte Aufnahme nicht verfügbar";
										}
										indoorcams += `<div class="col mb-3">`;
										indoorcams += `<div class="card">`;
										indoorcams += `<h5 class="card-header">${myObj.data[object].name}</h5>`;
										indoorcams += `<div class="row no-gutters">`;
										indoorcams += `<div class="col-md-4">${imagepath}</div>`;
										indoorcams += `<div class="col-md-8">`;
										indoorcams += `<div class="card-body" style="margin-left: -1rem">`;
										indoorcams += `<h6 class="card-subtitle mb-2 text-muted">${type}</h6>`;
										indoorcams += `<p class="card-text">${myObj.data[object].device_id}<br />SW: ${myObj.data[object].software_version}<br /></p>`;
										indoorcams += `</div>`;
										indoorcams += `</div>`;
										indoorcams += `</div>`;
										indoorcams += `<div class="card-footer">`;
										indoorcams += `<small class="text-muted">Letzte Aufnahme: ${lastVideo}</small>`;
										indoorcams += `</div>`;
										indoorcams += `</div>`;
										indoorcams += `</div>`;
									}
									else if(myObj.data[object].device_type == "doorbell")
									{
										// T8210 > Video Doorbell 2K (battery)
										// T8200 > Video Doorbell 2K (wired)
										// T8222 > Video Doorbell 1080p (battery)
									}
									else if(myObj.data[object].device_type == "floodlight")
									{
										switch (myObj.data[object].model)
										{
											case "T8420":
												imagepath = `<img src="assets/devices/eufyFloodLightCam.png" class="card-img-top" alt="Floodlight Camera">`;
												type = "Floodlight Camera";
												break;
											default:
												imagepath = `<img src="assets/devices/eufyCam2.png" class="card-img-top" alt="Flutlichtkamera">`;
												type = "Flutlichtkamera";
										}
										if(myObj.data[object].last_camera_image_time != "" && myObj.data[object].last_camera_image_time != "n/a" && myObj.data[object].last_camera_image_time != "n/d" && myObj.data[object].last_camera_image_time != "0")
										{
											lastVideo = makeDateTimeString(new Date(parseInt(myObj.data[object].last_camera_image_time)));
											lastVideo += ` | <a href="${myObj.data[object].last_camera_image_url}">Standbild</a>`;
										}
										else if(myObj.data[object].last_camera_image_time == "n/a")
										{
											lastVideo = "keine Aufnahme";
										}
										else
										{
											lastVideo = "letzte Aufnahme nicht verfügbar";
										}
										floodlightcams += `<div class="col mb-3">`;
										floodlightcams += `<div class="card">`;
										floodlightcams += `<h5 class="card-header">${myObj.data[object].name}</h5>`;
										floodlightcams += `<div class="row no-gutters">`;
										floodlightcams += `<div class="col-md-4">${imagepath}</div>`;
										floodlightcams += `<div class="col-md-8">`;
										floodlightcams += `<div class="card-body" style="margin-left: -1rem">`;
										floodlightcams += `<h6 class="card-subtitle mb-2 text-muted">${type}</h6>`;
										floodlightcams += `<p class="card-text">${myObj.data[object].device_id}"<br />SW: ${myObj.data[object].software_version}</p>`;
										floodlightcams += `</div>`;
										floodlightcams += `</div>`;
										floodlightcams += `</div>`;
										floodlightcams += `<div class="card-footer">`;
										floodlightcams += `<small class="text-muted">Letzte Aufnahme: ${lastVideo}</small>`;
										floodlightcams += `</div>`;
										floodlightcams += `</div>`;
										floodlightcams += `</div>`;
									}
									else if(myObj.data[object].device_type == "lock")
									{}
									else if(myObj.data[object].device_type == "keypad")
									{}
									else if(myObj.data[object].device_type == "sensor")
									{}
								}
								if(cams != "")
								{
									//text += `<p id="cameras"><h4>Kameras</h4><div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5">${cams}</div></p>`;
									text += `<p id="cameras"><h4>Kameras</h4><div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-3 row-cols-xl-5">${cams}</div></p>`;
									type = "";
								}
								if(indoorcams != "")
								{
									//text += `<p id="indoorcameras"><h4>Innenkameras</h4><div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5">${indoorcams}</div></p>`;
									text += `<p id="indoorcameras"><h4>Innenkameras</h4><div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-3 row-cols-xl-5">${indoorcams}</div></p>`;
									type="";
								}
								if(floodlightcams != "")
								{
									//text += `<p id="floodlightcameras"><h4>Flutlichtkameras</h4><div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5">${floodlightcams}</div></p>`;
									text += `<p id="floodlightcameras"><h4>Flutlichtkameras</h4><div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-3 row-cols-xl-5">${floodlightcams}</div></p>`;
									type = "";
								}
								
								document.getElementById("devices").innerHTML =  text;
							}
							else
							{
								document.getElementById("devices").innerHTML = `<h4>Geräte</h4><div class="alert alert-danger" role="alert">Es wurden keine Geräte gefunden.</div>`;
							}
							
						}
						else
						{
							document.getElementById("devices").innerHTML = `<h4>Geräte</h4><div class="alert alert-danger" role="alert">Fehler beim Laden der Geräte.</div>`;
						}
					}
					else if (this.readyState == 4)
					{
						document.getElementById("devices").innerHTML = `<h4>Geräte</h4><div class="alert alert-danger" role="alert">Fehler beim Laden der Geräte.</div>`;
					}
					else
					{
						document.getElementById("devices").innerHTML = `<div class="d-flex align-items-center"><div class="spinner-border m-4 float-left" role="status" aria-hidden="true"></div><strong>Lade verfügbare Geräte...</strong></div>`;
					}
				};
				xmlhttp.open("GET", url, true);
				xmlhttp.send();
			}

			function makeDateTimeString(dateTime)
			{
				return (`${dateTime.getDate().toString().padStart(2,'0')}.${(dateTime.getMonth()+1).toString().padStart(2,'0')}.${dateTime.getFullYear().toString()} ${dateTime.getHours().toString().padStart(2,'0')}:${dateTime.getMinutes().toString().padStart(2,'0')}:${dateTime.getSeconds().toString().padStart(2,'0')}`);
			}

			function showDeviceSettings(deviceId)
			{
				const myModal = new bootstrap.Modal(document.getElementById('modalNotImplemented'));
				//document.getElementById("btnOKModalNotImplemented").removeAttribute("onClick");
				//document.getElementById("btnOKModalNotImplemented").setAttribute("onClick", `checkCheckField("chkUseHttps")`);
				myModal.show();
			}

			function showStationSettings(stationId)
			{
				const myModal = new bootstrap.Modal(document.getElementById('modalNotImplemented'));
				//document.getElementById("btnOKModalNotImplemented").removeAttribute("onClick");
				//document.getElementById("btnOKModalNotImplemented").setAttribute("onClick", `checkCheckField("chkUseHttps")`);
				myModal.show();
			}
		</script>
	</body>
</html>